<?php
/**
 * Copyright Â© Magento, Inc. All rights reserved.
 * See COPYING.txt for license details.
 */

/**
 * New child element for conditions widget
 *
 * @var \Magento\Framework\View\Element\AbstractBlock $block
 */
?>

<?php $element = $block->getElement();?>
<?php $elementId = $element->getHtmlId();?>
&nbsp;<span class="rule-param rule-param-new-child" <?php if ($element->getParamId()) :  ?> id="<?= $block->escapeHtmlAttr($element->getParamId()) ?>" <?php endif; ?> >
<a href="javascript:void(0)" class="label">
    <?= $block->escapeHtml($element->getValueName()) ?>
</a>
<span class="element">
    <?= $block->escapeHtml(__('Please choose a condition to add.')) ?>
    <a href="javascript:setValueToElementValueChanger('<?= /* @noEscape */ $elementId ?>', false);void(0)"><?= $block->escapeHtml(__('Close')) ?></a>

    <?= $element->getElementHtml() ?>
    <?php if ($values = $element->getValues()) :?>
        <?php foreach ($values as $key => $option) : ?>
            <dl>
                <?php if (is_string($option['value'])) :?>
                        <dt>
                            <a onclick="javascript:setValueToElementValueChanger('<?= /* @noEscape */ $elementId ?>', '<?= $block->escapeHtmlAttr($block->escapeJs($option['value'])) ?>');void(0);"><?= $block->escapeHtml($option['label']) ?></a>
                        </dt>
                <?php endif;?>
                <?php if (is_array($option['value'])) :?>
                    <dt><?= $block->escapeHtml($option['label']) ?></dt>
                    <?php foreach ($option['value'] as $item) : ?>
                        <dd>
                            <a onclick="javascript:setValueToElementValueChanger('<?= /* @noEscape */ $elementId ?>', '<?= $block->escapeHtmlAttr($block->escapeJs($item['value'])) ?>');void(0);"><?= $block->escapeHtml($item['label']) ?></a>
                        </dd>
                    <?php endforeach; ?>
                <?php endif;?>
            </dl>
        <?php endforeach; ?>
    <?php endif;?>
</span></span>&nbsp;

<script>
require(['prototype'], function(){

//<![CDATA[
function setValueToElementValueChanger(changerId, value)
{
    elementValueChanger = $(changerId);
    if (!value){
        value = '';
    }
    elementValueChanger.value = value;
    elementValueChanger.container.rulesObject.hideParamInputField(elementValueChanger.container);
}
window.setValueToElementValueChanger = setValueToElementValueChanger;
//]]>

});
</script>
